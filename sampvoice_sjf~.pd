#N canvas -1121 653 1051 638 10;
#X obj 23 483 tabplay~ \$0-samp, f 8;
#X obj 73 66 inlet;
#X obj 23 543 outlet~;
#X obj 73 87 sel 0;
#X obj 100 108 t b f, f 53;
#N canvas 0 23 855 300 sampVoice_VolLogic 0;
#X obj 448 216 *~, f 22;
#X obj 578 94 line~;
#X text 542 50 ---->;
#X obj 578 49 / 127;
#X msg 578 72 \$1 1;
#X obj 448 183 inlet~;
#X obj 448 266 outlet~;
#X text 444 160 signal in;
#X obj 578 27 inlet;
#X text 233 51 Divide by 127 to convert MIDI vel to volume (0-->1)
;
#X text 68 12 Using two separate volume stages (one for the slider
\, and one for MIDI velocity is the easiest solution for combining
both);
#X text 558 11 MIDI Velocity(0--> 127);
#X text 320 217 MIDI velocity stage;
#X obj 448 241 *~, f 39;
#X obj 679 110 line~;
#X obj 679 66 inlet;
#X msg 679 88 \$1 5;
#X text 658 47 Volume Slider (0--> 1);
#X connect 0 0 13 0;
#X connect 1 0 0 1;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 0 0;
#X connect 8 0 3 0;
#X connect 13 0 6 0;
#X connect 14 0 13 1;
#X connect 15 0 16 0;
#X connect 16 0 14 0;
#X restore 23 522 pd sampVoice_VolLogic;
#X f 90;
#N canvas 0 23 788 372 sampVoice_PlayLogic 1;
#X obj 303 58 inlet;
#X obj 303 78 t b f, f 14;
#X obj 303 174 *, f 14;
#X msg 225 270 0 \$1;
#X obj 225 223 f, f 13;
#X obj 303 149 f;
#X obj 225 291 outlet;
#X obj 225 58 inlet;
#X text 220 42 Trigger;
#X obj 512 58 inlet;
#X text 468 42 Length Slider (0 --> 1);
#X text 290 42 File Length (samps);
#X text 394 175 <--- fileLength * 1 == full length;
#X text 394 187 <--- fileLength * 0.5 == half length;
#X text 422 200 etc.;
#X text 311 222 Store play length;
#X text 410 136 Play length == filesize in samples * length slider
;
#X text 261 271 Start at 0 \, play playlength samples;
#X text 68 222 bang triggers playlength;
#X text 196 327 This is just to set the display;
#X floatatom 225 244 5 0 0 0 - - -;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 1 1 2 1;
#X connect 2 0 4 1;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 4 0 20 0;
#X connect 5 0 2 0;
#X connect 7 0 4 0;
#X connect 9 0 5 0;
#X restore 23 439 pd sampVoice_PlayLogic;
#X f 10;
#N canvas 0 23 619 300 sampVoice_LoadLogic 0;
#X obj 381 179 soundfiler;
#X obj 381 74 openpanel;
#X obj 381 96 pack s \$0;
#X floatatom 381 200 5 0 0 0 - - -;
#X text 182 73 1 - open a file load dialog box;
#X text 18 92 2 - because I gave my array a unique identifier (the
\$0- in its name) I need to load will need to load it so I can direct
PD to the correct array;
#X text 25 137 3 - we want to "-resize" the array \, and "read" the
sample into it \, so we combine it all on a message;
#X text 57 178 4 - actually read the file and write it to the array
;
#X text 197 200 Size of file in samples ---->;
#X obj 381 55 inlet;
#X obj 381 220 outlet;
#X msg 381 139 read -resize \$1 \$2-samp;
#X obj 462 262 s \$0-size_rec;
#X msg 462 240 set \$1;
#X obj 462 221 * 1000;
#X obj 462 200 / 44100;
#X text 513 200 samps to s;
#X text 513 220 s to ms;
#X connect 0 0 3 0;
#X connect 0 0 15 0;
#X connect 1 0 2 0;
#X connect 2 0 11 0;
#X connect 3 0 10 0;
#X connect 9 0 1 0;
#X connect 11 0 0 0;
#X connect 13 0 12 0;
#X connect 14 0 13 0;
#X connect 15 0 14 0;
#X restore 608 337 pd sampVoice_LoadLogic;
#X f 10;
#X obj 608 316 r \$0-load_snd;
#X obj 101 443 r \$0-length_snd, f 10;
#X obj 560 493 r \$0-vol_snd;
#X obj 444 111 tabwrite~ \$0-samp;
#X text 46 49 MIDI Velocity IN;
#X obj 444 68 inlet~;
#X obj 493 68 r \$0-rec_snd;
#X text 441 45 Audio In (for recording);
#X text 519 587 sjf \, SAE London \, 2020;
#X text 33 16 I've tried to tidy this up with send/receive objects
;
#N canvas 0 23 450 300 sampVoice_sizeLogic 0;
#X obj 37 37 inlet;
#X obj 37 58 / 1000;
#X obj 37 79 * 44100;
#X obj 37 100 array size \$0-samp;
#X text 80 59 ms to sec;
#X text 85 79 sec to samps;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X restore 463 212 pd sampVoice_sizeLogic;
#X obj 463 190 r \$0-size_snd;
#X msg 123 268 100;
#X obj 96 242 t b b;
#N canvas 0 23 450 278 (subpatch) 0;
#X array \$0-samp 12840 float 2;
#X coords 0 1 12840 -1 80 40 1 0 0;
#X restore 219 188 graph;
#X obj 300 190 vsl 15 50 0 1 0 1 \$0-vol_snd \$0-vol_rec volume 0 -9
0 10 -228856 -1 -1 4900 1;
#X obj 177 187 bng 15 250 50 0 empty empty play 17 7 0 10 -204786 -1
-1;
#X obj 177 206 bng 15 250 50 0 \$0-load_snd empty load 17 7 0 10 -203904
-1 -1;
#X obj 222 228 hsl 75 15 0 1 0 1 \$0-length_snd \$0-length_rec empty
-2 -8 0 10 -228856 -1 -1 7400 1;
#X text 225 228 length;
#X obj 177 225 bng 15 250 50 0 \$0-rec_snd \$0-rec_rec rec 17 7 0 10
-261234 -1 -1;
#X floatatom 236 244 10 0 10000 0 size_(ms) #0-size_rec #0-size_snd
;
#X obj 325 165 bng 8 250 50 0 empty empty empty 17 7 0 10 -191407 -262130
-1;
#X obj 700 86 inlet;
#X text 675 59 external sample load messages;
#X obj 731 130 int \$0;
#X msg 700 177 read -resize \$1 \$2-samp;
#X obj 699 200 soundfiler;
#X obj 700 155 pack s 0;
#X obj 700 105 t a b;
#X obj 700 283 s \$0-size_rec;
#X msg 700 261 set \$1;
#X obj 700 242 * 1000;
#X obj 700 221 / 44100;
#X obj 767 221 s \$0-size_samps;
#X obj 617 381 s \$0-size_samps;
#X obj 59 408 r \$0-size_samps;
#X connect 0 0 5 0;
#X connect 1 0 3 0;
#X connect 3 1 4 0;
#X connect 4 0 6 0;
#X connect 4 0 30 0;
#X connect 4 1 5 1;
#X connect 5 0 2 0;
#X connect 6 0 0 0;
#X connect 7 0 43 0;
#X connect 8 0 7 0;
#X connect 9 0 6 2;
#X connect 10 0 5 2;
#X connect 13 0 11 0;
#X connect 14 0 11 0;
#X connect 19 0 18 0;
#X connect 20 0 5 1;
#X connect 21 0 6 0;
#X connect 21 1 20 0;
#X connect 24 0 30 0;
#X connect 24 0 21 0;
#X connect 31 0 37 0;
#X connect 33 0 36 1;
#X connect 34 0 35 0;
#X connect 35 0 41 0;
#X connect 35 0 42 0;
#X connect 36 0 34 0;
#X connect 37 0 36 0;
#X connect 37 1 33 0;
#X connect 39 0 38 0;
#X connect 40 0 39 0;
#X connect 41 0 40 0;
#X connect 44 0 6 1;
#X coords 0 -1 1 1 170 100 1 170 160;
