#N canvas -1216 581 1129 621 10;
#X floatatom 48 193 5 0 0 1 frequency_(Hz) - -;
#X floatatom 928 404 10 0 0 1 Hz - -;
#X floatatom 408 437 10 0 0 0 - - -;
#N canvas 0 23 450 300 finerControl 0;
#X obj 37 37 inlet;
#X obj 66 79 sqrt;
#X text 106 75 This just gives me a more usable output from the slider
(i.e. finer control of higher values);
#X floatatom 30 97 5 0 0 0 - - -;
#X obj 67 61 sqrt;
#X floatatom 66 100 5 0 0 0 - - -;
#X obj 66 120 outlet;
#X connect 0 0 4 0;
#X connect 0 0 3 0;
#X connect 1 0 5 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X restore 408 416 pd finerControl;
#X msg 408 457 \$1 10;
#X obj 408 478 line~;
#N canvas 0 23 585 400 Vibrating_Medium 0;
#X text 94 244 <-- period of 20Hz in ms;
#X obj 48 135 lop~ 7000, f 24;
#X obj 48 157 *~, f 35;
#X obj 48 206 outlet~;
#X obj 48 64 inlet~;
#X obj 270 102 inlet~;
#X text 269 80 Sustain;
#X obj 180 80 inlet;
#X text 155 59 medium_damping_Freq;
#X obj 363 158 inlet~;
#X text 360 130 initial attack;
#X text 46 38 frequency;
#X obj 363 227 delwrite~ \$0-karStro_5 50;
#X obj 48 102 vd~ \$0-karStro_5;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 12 0;
#X connect 4 0 13 0;
#X connect 5 0 2 1;
#X connect 7 0 1 1;
#X connect 9 0 12 0;
#X connect 13 0 1 0;
#X restore 48 517 pd Vibrating_Medium;
#X f 88;
#X obj 623 350 adsr_1shot_sjf~;
#X obj 571 411 noise~;
#X obj 571 432 *~, f 9;
#X obj 48 171 mtof;
#X obj 622 274 t f f, f 26;
#X text 530 345 midi velocity;
#X text 493 360 triggers my envelope;
#N canvas 0 23 450 300 brightness_logic 0;
#X obj 37 37 inlet;
#X obj 65 101 cnv 15 300 100 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 92 123 + 4;
#X obj 92 105 * 12;
#X text 118 121 cutoff must be at least 4 times;
#X text 121 104 Arbitrary maximum of 16(12+4);
#X obj 77 157 *;
#X floatatom 77 178 5 0 0 1 (Hz) - -;
#X text 116 134 frequency of note (i.e. 2 octaves above);
#X text 103 158 multiply by the frequency of note so that;
#X text 137 169 cutoff is always some multiple of;
#X text 138 182 frequency of note played;
#X obj 78 230 outlet;
#X text 32 9 frequency of note;
#X obj 93 78 inlet;
#X text 74 59 brightness control;
#X connect 0 0 6 0;
#X connect 2 0 6 1;
#X connect 3 0 2 0;
#X connect 6 0 7 0;
#X connect 7 0 12 0;
#X connect 14 0 3 0;
#X restore 249 423 pd brightness_logic;
#N canvas 0 23 766 301 attack_brightness_logic 0;
#X obj 64 146 inlet~;
#X obj 64 191 lop~ 2000, f 35;
#X obj 255 76 cnv 15 470 100 empty empty empty 20 12 0 14 -233017 -66577
0;
#X floatatom 269 141 10 0 0 1 Hz - -;
#X obj 269 95 / 127;
#X obj 269 118 *, f 14;
#X text 367 83 Nothing clever here \, I just divide the midi velocity
by 127 (to convert it to a range between 0-->1) and then multiply this
by the brightness control --> therefore greater velocity notes result
in a brighter attack;
#X obj 64 212 outlet~;
#X text 61 123 pluck sound in;
#X obj 271 52 inlet;
#X obj 349 49 inlet;
#X text 259 32 MIDI vel;
#X text 342 31 attack brightness (Hz);
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 3 0 1 1;
#X connect 4 0 5 0;
#X connect 5 0 3 0;
#X connect 9 0 4 0;
#X connect 10 0 5 1;
#X restore 571 453 pd attack_brightness_logic;
#X f 69;
#X text 168 348 <--- click me to see vibrato;
#N canvas 479 81 891 413 delayTime_&_vibrato_logic 0;
#X floatatom 570 272 5 0 0 1 semitones - -;
#X obj 172 331 outlet~;
#X obj 81 41 inlet;
#X text 62 22 frequency of pitch;
#X obj 570 250 inlet;
#X obj 411 142 inlet;
#X obj 411 168 osc~, f 11;
#X text 355 120 vibrato rate;
#X text 551 231 maximum vibrato depth in semitones;
#X obj 81 91 t f b, f 66;
#X text 505 118 I reset the phase at the beginning of each note;
#X msg 474 117 0.75;
#X text 506 128 (I set it to 0.75 because the oscillator is actually
a cosine wave...);
#X obj 411 257 *~, f 21;
#X obj 411 297 expr~ pow(2 \, $v1/12);
#X obj 411 194 *~;
#X text 439 194 this converts all negative values to positive;
#X text 443 208 and also curves the output logarithmically;
#X text 538 296 semitone formula!!!;
#X obj 81 116 sig~;
#X obj 234 258 *~, f 10;
#X obj 172 279 /~, f 11;
#X obj 411 215 *~;
#X text 18 282 frequency to period (ms);
#X obj 172 300 *~ 1000;
#X obj 172 258 sig~ 1;
#X obj 202 136 inlet;
#X text 183 117 slide amount (0-->1);
#N canvas 0 23 450 300 slide_logic 0;
#X obj 37 37 inlet;
#X obj 37 106 1over_sjf;
#X obj 37 127 sel 0, f 16;
#X msg 37 148 20000;
#X obj 76 196 outlet;
#X obj 37 58 t f f;
#X obj 37 79 *;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 4 0;
#X connect 5 0 6 0;
#X connect 5 1 6 1;
#X connect 6 0 1 0;
#X restore 201 157 pd slide_logic;
#X obj 145 218 lop~ 20000;
#X connect 0 0 13 1;
#X connect 2 0 9 0;
#X connect 4 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 15 0;
#X connect 6 0 15 1;
#X connect 9 0 19 0;
#X connect 9 1 11 0;
#X connect 11 0 6 1;
#X connect 13 0 14 0;
#X connect 14 0 20 1;
#X connect 15 0 22 0;
#X connect 15 0 22 1;
#X connect 19 0 29 0;
#X connect 20 0 21 1;
#X connect 21 0 24 0;
#X connect 22 0 13 0;
#X connect 24 0 1 0;
#X connect 25 0 21 0;
#X connect 26 0 28 0;
#X connect 28 0 29 1;
#X connect 29 0 20 0;
#X restore 48 334 pd delayTime_&_vibrato_logic;
#X f 19;
#X obj 49 8 inlet;
#X obj 48 538 outlet~;
#X obj 643 303 r \$1-att_snd;
#X obj 671 323 r \$1-dec_snd;
#X obj 928 375 r \$1-attack_brightness_snd;
#X obj 408 391 r \$1-sustain_snd;
#X obj 267 389 r \$1-brightness_snd;
#X obj 134 282 r \$1-vib_depth_snd;
#X obj 99 239 r \$1-vib_rate_snd, f 14;
#X text 860 528 sjf \, SAE London \, 2020;
#X obj 49 29 route \$2;
#X obj 49 50 unpack;
#X text 427 57 this object expects 2 arguments --> the unique identifies
($)) of the parent patch;
#X text 428 86 and the voice number 0--> n;
#X obj 48 213 t f f, f 34;
#X obj 65 305 r \$1-slide_snd;
#X connect 0 0 32 0;
#X connect 1 0 15 2;
#X connect 2 0 4 0;
#X connect 3 0 2 0;
#X connect 4 0 5 0;
#X connect 5 0 6 2;
#X connect 6 0 19 0;
#X connect 7 0 9 1;
#X connect 8 0 9 0;
#X connect 9 0 15 0;
#X connect 10 0 0 0;
#X connect 11 0 7 0;
#X connect 11 1 15 1;
#X connect 14 0 6 1;
#X connect 15 0 6 3;
#X connect 17 0 6 0;
#X connect 18 0 28 0;
#X connect 20 0 7 1;
#X connect 21 0 7 2;
#X connect 22 0 1 0;
#X connect 23 0 3 0;
#X connect 24 0 14 1;
#X connect 25 0 17 3;
#X connect 26 0 17 2;
#X connect 28 0 29 0;
#X connect 29 0 10 0;
#X connect 29 1 11 0;
#X connect 32 0 17 0;
#X connect 32 1 14 0;
#X connect 33 0 17 1;
